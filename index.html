<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cosmic Edition</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free@6.5.2/css/all.min.css"/>
  <style>
    :root {
      --black:    #000000;
      --dark1:    #0A0A0A;
      --dark2:    #111111;
      --dark3:    #191919;
      --dark4:    #222222;
      --dark5:    #2E2E2E;
      --white:    #FFFFFF;
      --offwhite: #E8E8E8;
      --grey1:    #AAAAAA;
      --grey2:    #666666;
      --grey3:    #333333;
      --border:   rgba(255,255,255,0.07);
      --border2:  rgba(255,255,255,0.16);
      --border3:  rgba(255,255,255,0.32);
      --ease:     cubic-bezier(0.4,0,0.2,1);
      --nav-h:    72px;
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Outfit', sans-serif;
      background: var(--black);
      color: var(--white);
      min-height: 100vh;
      overflow-x: hidden;
    }
    body::before {
      content: ''; position: fixed; inset: 0; z-index: 0; pointer-events: none;
      background-image: radial-gradient(rgba(255,255,255,0.06) 1px, transparent 1px);
      background-size: 28px 28px;
      background-attachment: fixed;
    }
    body::after {
      content: ''; position: fixed; inset: 0; z-index: 0; pointer-events: none;
      background:
        radial-gradient(ellipse 80% 50% at 10% 15%, rgba(255,255,255,0.03) 0%, transparent 60%),
        radial-gradient(ellipse 60% 60% at 90% 80%, rgba(255,255,255,0.025) 0%, transparent 55%),
        radial-gradient(ellipse 90% 40% at 50% 100%, rgba(255,255,255,0.02) 0%, transparent 50%),
        radial-gradient(ellipse 100% 100% at 50% 50%, transparent 55%, rgba(0,0,0,0.6) 100%);
    }
    #bg-orbs {
      position: fixed; inset: 0; z-index: 0; pointer-events: none; overflow: hidden;
    }
    #bg-orbs span {
      position: absolute; border-radius: 50%;
      filter: blur(80px); opacity: 0;
      animation: orbFloat linear infinite;
    }
    #bg-orbs span:nth-child(1) { width: 500px; height: 500px; left: -10%; top: -10%; background: radial-gradient(circle, rgba(255,255,255,0.04), transparent 70%); animation-duration: 25s; animation-delay: 0s; }
    #bg-orbs span:nth-child(2) { width: 400px; height: 400px; right: -5%; top: 20%; background: radial-gradient(circle, rgba(255,255,255,0.03), transparent 70%); animation-duration: 30s; animation-delay: -8s; }
    #bg-orbs span:nth-child(3) { width: 350px; height: 350px; left: 30%; bottom: -10%; background: radial-gradient(circle, rgba(255,255,255,0.035), transparent 70%); animation-duration: 20s; animation-delay: -14s; }
    #bg-orbs span:nth-child(4) { width: 300px; height: 300px; right: 25%; top: 60%; background: radial-gradient(circle, rgba(255,255,255,0.025), transparent 70%); animation-duration: 35s; animation-delay: -5s; }
    @keyframes orbFloat {
      0%   { opacity: 0; transform: translateY(30px) scale(0.9); }
      10%  { opacity: 1; }
      90%  { opacity: 1; }
      100% { opacity: 0; transform: translateY(-30px) scale(1.1); }
    }
    #bg-noise {
      position: fixed; inset: 0; z-index: 0; pointer-events: none;
      opacity: 0.025;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
      background-size: 180px 180px;
    }
    #bg-scan {
      position: fixed; inset: 0; z-index: 0; pointer-events: none;
      background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(255,255,255,0.008) 2px,
        rgba(255,255,255,0.008) 4px
      );
    }
    #page { position: relative; z-index: 1; }

    /* NAV */
    #nav {
      position: sticky; top: 0; z-index: 100;
      height: var(--nav-h);
      background: rgba(0,0,0,0.92);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
      display: flex; align-items: center;
      padding: 0 44px; gap: 20px;
    }
    .logo { display: flex; align-items: center; text-decoration: none; flex-shrink: 0; }
    .logo img { height: 54px; width: auto; filter: invert(1) brightness(1.05); transition: filter .25s; }
    .logo:hover img { filter: invert(1) brightness(1.5); }
    .logo-text { font-family: 'Bebas Neue', sans-serif; font-size: 26px; letter-spacing: 3px; color: var(--white); }

    .nav-search { flex: 1; max-width: 360px; margin-left: auto; position: relative; }
    .nav-search i { position: absolute; left: 14px; top: 50%; transform: translateY(-50%); color: var(--grey2); font-size: 12px; pointer-events: none; }
    #search-input {
      width: 100%; background: var(--dark3); border: 1px solid var(--border);
      border-radius: 50px; padding: 10px 16px 10px 38px;
      color: var(--white); font-family: 'Outfit', sans-serif; font-size: 13px; outline: none;
      transition: border-color .2s, box-shadow .2s;
    }
    #search-input::placeholder { color: var(--grey3); }
    #search-input:focus { border-color: var(--border3); box-shadow: 0 0 0 3px rgba(255,255,255,0.04); }

    .sort-group { display: flex; align-items: center; gap: 6px; flex-shrink: 0; }
    .sort-btn {
      display: flex; align-items: center; gap: 7px;
      padding: 8px 16px; border-radius: 50px;
      border: 1px solid var(--border); background: var(--dark3);
      color: var(--grey1); font-family: 'Outfit', sans-serif;
      font-size: 12px; font-weight: 500; cursor: pointer;
      transition: all .2s; white-space: nowrap;
    }
    .sort-btn i { font-size: 10px; }
    .sort-btn:hover { background: var(--dark4); border-color: var(--border2); color: var(--white); }
    .sort-btn.active { background: var(--white); border-color: var(--white); color: var(--black); }
    .nav-badge {
      flex-shrink: 0; background: var(--dark3); border: 1px solid var(--border);
      border-radius: 50px; padding: 6px 14px;
      font-family: 'JetBrains Mono', monospace; font-size: 10px; color: var(--grey1); letter-spacing: 2px;
    }

    /* HERO */
    #hero { padding: 72px 44px 0; }
    .hero-eyebrow {
      display: inline-flex; align-items: center; gap: 10px;
      font-family: 'JetBrains Mono', monospace; font-size: 10px;
      letter-spacing: 5px; text-transform: uppercase; color: var(--grey2); margin-bottom: 18px;
    }
    .hero-eyebrow::before { content: ''; width: 24px; height: 1px; background: var(--grey2); display: inline-block; }
    .hero-title {
      font-family: 'Bebas Neue', sans-serif;
      font-size: clamp(54px, 7vw, 104px);
      line-height: .92; letter-spacing: 1px; color: var(--white);
    }
    .hero-title .outline { -webkit-text-stroke: 2px var(--white); color: transparent; }
    .hero-sub { margin-top: 18px; font-size: 14px; color: var(--grey2); font-weight: 300; line-height: 1.8; max-width: 400px; }

    .divider {
      margin: 52px 44px 0; height: 1px;
      background: linear-gradient(90deg, transparent, var(--border2) 30%, var(--border2) 70%, transparent);
    }

    /* SECTION HEADER */
    .section-hdr { display: flex; align-items: center; justify-content: space-between; margin-bottom: 22px; }
    .section-hdr-left { display: flex; align-items: center; gap: 12px; }
    .section-tag { font-family: 'Bebas Neue', sans-serif; font-size: 20px; letter-spacing: 4px; color: var(--white); }
    .section-count {
      font-family: 'JetBrains Mono', monospace; font-size: 10px; color: var(--grey2);
      letter-spacing: 2px; padding: 3px 10px; border: 1px solid var(--border); border-radius: 50px;
    }
    .section-hint { font-size: 11px; color: var(--grey3); display: flex; align-items: center; gap: 6px; }

    /* FEATURED */
    #featured-section { padding: 46px 44px 0; }
    #feat-scroll { display: flex; gap: 14px; overflow-x: auto; padding-bottom: 14px; scrollbar-width: none; cursor: grab; }
    #feat-scroll:active { cursor: grabbing; }
    #feat-scroll::-webkit-scrollbar { display: none; }
    .feat-card {
      min-width: 235px; width: 235px; height: 154px;
      border-radius: 14px; border: 1px solid var(--border);
      overflow: hidden; position: relative; cursor: pointer; flex-shrink: 0;
      background: var(--dark2); transition: transform .28s var(--ease), border-color .28s, box-shadow .28s;
    }
    .feat-card:hover { transform: translateY(-7px) scale(1.02); border-color: var(--border3); box-shadow: 0 24px 60px rgba(0,0,0,0.85); }
    .feat-bg { position: absolute; inset: 0; background: var(--dark3); }
    .feat-bg::after {
      content: ''; position: absolute; inset: 0;
      background-image: repeating-linear-gradient(-45deg, rgba(255,255,255,0.018) 0px, rgba(255,255,255,0.018) 1px, transparent 1px, transparent 14px);
    }
    .feat-icon { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; font-size: 46px; z-index: 2; color: rgba(255,255,255,0.12); transition: transform .25s, color .25s; }
    .feat-card:hover .feat-icon { transform: scale(1.18) translateY(-5px); color: rgba(255,255,255,0.28); }
    .feat-overlay { position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.92) 0%, rgba(0,0,0,0.15) 55%, transparent 100%); z-index: 3; }
    .feat-body { position: absolute; bottom: 0; left: 0; right: 0; padding: 12px 14px; z-index: 4; }
    .feat-title { font-weight: 700; font-size: 13px; color: var(--white); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .feat-cta { display: inline-flex; align-items: center; gap: 6px; margin-top: 5px; font-family: 'JetBrains Mono', monospace; font-size: 10px; letter-spacing: 2px; color: var(--grey1); opacity: 0; transform: translateY(5px); transition: opacity .2s, transform .2s; }
    .feat-card:hover .feat-cta { opacity: 1; transform: none; }
    .feat-badge { position: absolute; top: 10px; right: 10px; z-index: 5; background: var(--white); color: var(--black); font-size: 8px; font-family: 'JetBrains Mono', monospace; font-weight: 700; letter-spacing: 1.5px; padding: 3px 9px; border-radius: 50px; }
    .feat-num { position: absolute; top: 10px; left: 12px; z-index: 5; font-family: 'Bebas Neue', sans-serif; font-size: 14px; letter-spacing: 2px; color: rgba(255,255,255,0.2); }

    /* GAMES */
    #games-section { padding: 46px 44px 100px; }
    #loading-state { display: flex; flex-direction: column; align-items: center; gap: 16px; padding: 100px 20px; }
    .loader { width: 40px; height: 40px; border: 1.5px solid var(--dark5); border-top-color: var(--white); border-radius: 50%; animation: spin .85s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .loader-label { font-family: 'JetBrains Mono', monospace; font-size: 10px; letter-spacing: 4px; color: var(--grey3); }
    #error-state { display: none; background: rgba(255,255,255,0.03); border: 1px solid var(--border2); border-radius: 14px; padding: 28px 32px; max-width: 500px; }
    #error-state h4 { font-family: 'Bebas Neue', sans-serif; font-size: 18px; letter-spacing: 2px; color: var(--offwhite); margin-bottom: 10px; }
    #error-state p { font-size: 13px; color: var(--grey2); line-height: 1.65; margin-bottom: 8px; }
    #error-state code { font-family: 'JetBrains Mono', monospace; font-size: 11px; background: var(--dark3); border: 1px solid var(--border); border-radius: 4px; padding: 2px 7px; color: var(--offwhite); }
    .empty-state { text-align: center; padding: 80px 20px; display: none; }
    .empty-state i { font-size: 40px; color: var(--grey3); margin-bottom: 14px; display: block; }
    .empty-state h3 { font-family: 'Bebas Neue', sans-serif; font-size: 26px; letter-spacing: 2px; color: var(--grey2); margin-bottom: 8px; }
    .empty-state p { font-size: 13px; color: var(--grey3); }

    #game-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 12px; }

    .game-card {
      background: var(--dark2); border: 1px solid var(--border);
      border-radius: 12px; overflow: hidden; cursor: pointer; position: relative;
      transition: border-color .2s, box-shadow .2s;
      contain: layout style paint;
    }
    .game-card::before {
      content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px;
      background: var(--white); transform: scaleX(0); transform-origin: left;
      transition: transform .3s var(--ease); z-index: 5;
    }
    .game-card:hover { border-color: var(--border3); box-shadow: 0 14px 40px rgba(0,0,0,0.65); }
    .game-card:hover::before { transform: scaleX(1); }
    .gc-thumb { height: 86px; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; background: var(--dark3); }
    .gc-thumb::before {
      content: ''; position: absolute; inset: 0;
      background-image: repeating-linear-gradient(-45deg, rgba(255,255,255,0.02) 0px, rgba(255,255,255,0.02) 1px, transparent 1px, transparent 12px);
    }
    .gc-thumb-icon { font-size: 28px; color: rgba(255,255,255,0.18); position: relative; z-index: 2; transition: transform .22s var(--ease), color .22s; }
    .game-card:hover .gc-thumb-icon { transform: scale(1.22) translateY(-2px); color: rgba(255,255,255,0.45); }
    .gc-body { padding: 12px 14px 14px; border-top: 1px solid var(--border); }
    .gc-title { font-weight: 600; font-size: 13px; color: var(--offwhite); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-bottom: 10px; }
    .gc-foot { display: flex; align-items: center; justify-content: space-between; }
    .gc-play {
      display: flex; align-items: center; gap: 6px;
      font-family: 'JetBrains Mono', monospace; font-size: 9px; letter-spacing: 2px; text-transform: uppercase;
      color: var(--grey2); background: var(--dark4); border: 1px solid var(--border); border-radius: 50px; padding: 5px 12px;
      transition: background .2s, border-color .2s, color .2s;
    }
    .gc-play i { font-size: 7px; }
    .game-card:hover .gc-play { background: var(--white); border-color: var(--white); color: var(--black); }
    .gc-num { font-family: 'JetBrains Mono', monospace; font-size: 9px; color: var(--grey3); }

    /* SCROLL TOP */
    #scroll-top {
      position: fixed; bottom: 30px; right: 30px; z-index: 90;
      width: 42px; height: 42px;
      background: #000000;
      border: 1.5px solid #ffffff;
      border-radius: 50%;
      color: #ffffff; font-size: 14px; cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      box-shadow: 0 0 14px rgba(255,255,255,0.55), 0 0 32px rgba(255,255,255,0.2), inset 0 0 10px rgba(255,255,255,0.04);
      opacity: 0; transform: translateY(14px); transition: opacity .3s, transform .3s, box-shadow .2s;
    }
    #scroll-top.show { opacity: 1; transform: none; }
    #scroll-top:hover {
      box-shadow: 0 0 24px rgba(255,255,255,0.9), 0 0 60px rgba(255,255,255,0.35), inset 0 0 14px rgba(255,255,255,0.07);
    }

    /* OVERLAY */
    #overlay {
      position: fixed; inset: 0; z-index: 500;
      background: rgba(0,0,0,0.97); backdrop-filter: blur(14px);
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      opacity: 0; pointer-events: none; transition: opacity .3s;
    }
    #overlay.active { opacity: 1; pointer-events: all; }
    .ov-window {
      width: 94vw; height: 92vh; max-width: 1500px;
      background: var(--dark1); border: 1px solid var(--border2); border-radius: 18px;
      overflow: hidden; display: flex; flex-direction: column;
      box-shadow: 0 60px 120px rgba(0,0,0,0.95);
      transform: scale(0.94) translateY(28px);
      transition: transform .4s cubic-bezier(0.34,1.4,0.64,1);
    }
    #overlay.active .ov-window { transform: scale(1) translateY(0); }
    .ov-bar {
      display: flex; align-items: center; gap: 12px; padding: 13px 20px;
      border-bottom: 1px solid var(--border); background: rgba(0,0,0,0.96); flex-shrink: 0;
    }
    .ov-dots { display: flex; gap: 7px; }
    .ov-dots span { width: 13px; height: 13px; border-radius: 50%; cursor: pointer; }
    .dot-r { background: #FF5F57; } .dot-y { background: #FFBD2E; } .dot-g { background: #28CA41; }
    #ov-title { flex: 1; text-align: center; font-family: 'JetBrains Mono', monospace; font-size: 11px; letter-spacing: 4px; color: var(--grey3); }
    .ov-controls { display: flex; gap: 6px; }
    .ov-btn { display: flex; align-items: center; gap: 7px; padding: 7px 14px; border: 1px solid var(--border); border-radius: 8px; background: var(--dark3); color: var(--grey2); font-family: 'Outfit', sans-serif; font-size: 12px; font-weight: 500; cursor: pointer; transition: all .18s; }
    .ov-btn:hover { background: var(--dark5); border-color: var(--border2); color: var(--white); }
    .ov-btn-close { border-color: rgba(255,95,87,.25); color: #ff8a84; }
    .ov-btn-close:hover { background: rgba(255,95,87,.1); border-color: #ff5f57; color: #ff5f57; }
    #game-frame { flex: 1; border: none; display: block; background: #000; }

    /* WATERMARKS */
    .wm-corner {
      position: fixed; z-index: 89; pointer-events: none;
      font-family: 'JetBrains Mono', monospace;
      font-size: 9px; letter-spacing: 3px; text-transform: uppercase;
      color: rgba(255,255,255,0.06); white-space: nowrap;
      user-select: none;
    }
    #wm-tl { top: 18px; left: 18px; }
    #wm-tr { top: 18px; right: 18px; text-align: right; }
    #wm-bl { bottom: 18px; left: 18px; }
    #wm-br { bottom: 18px; right: 18px; text-align: right; }
    #wm-center {
      position: fixed; z-index: 89; pointer-events: none;
      top: 50%; left: 50%; transform: translate(-50%,-50%) rotate(-35deg);
      font-family: 'Bebas Neue', sans-serif;
      font-size: clamp(60px, 12vw, 140px); letter-spacing: 12px;
      color: rgba(255,255,255,0.018);
      white-space: nowrap; user-select: none;
    }

    /* ── OPEN AS BLOB BUTTON ── */
    #open-blob-btn {
      position: fixed;
      bottom: 30px;
      left: 30px;
      z-index: 99999;
      display: flex;
      align-items: center;
      gap: 9px;
      padding: 0 20px 0 16px;
      height: 46px;
      background: #000000;
      border: 1.5px solid #ffffff;
      border-radius: 50px;
      color: #ffffff;
      font-family: 'JetBrains Mono', monospace;
      font-size: 10px;
      font-weight: 700;
      letter-spacing: 2px;
      text-transform: uppercase;
      cursor: pointer;
      box-shadow: 0 0 14px rgba(255,255,255,0.55), 0 0 32px rgba(255,255,255,0.2), inset 0 0 12px rgba(255,255,255,0.04);
      opacity: 1 !important;
      visibility: visible !important;
      transition: transform .2s, box-shadow .2s;
      white-space: nowrap;
    }
    #open-blob-btn:hover {
      transform: scale(1.06) translateY(-2px);
      box-shadow: 0 0 24px rgba(255,255,255,0.9), 0 0 60px rgba(255,255,255,0.35), inset 0 0 18px rgba(255,255,255,0.07);
    }
    #open-blob-btn:active { transform: scale(0.97); }
    #open-blob-btn .blob-icon {
      width: 26px; height: 26px;
      background: #ffffff;
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 12px;
      color: #000000;
      flex-shrink: 0;
    }

    /* ── FULLSCREEN NOTIFICATION ── */
    #fs-notify {
      position: fixed;
      bottom: 90px;
      left: 30px;
      z-index: 99998;
      max-width: 310px;
      background: #000000;
      border: 1.5px solid #ffffff;
      border-radius: 14px;
      padding: 14px 16px 14px 14px;
      box-shadow: 0 0 18px rgba(255,255,255,0.45), 0 0 40px rgba(255,255,255,0.15), inset 0 0 14px rgba(255,255,255,0.03);
      display: flex;
      align-items: flex-start;
      gap: 12px;
      opacity: 0;
      transform: translateY(16px) scale(0.96);
      transition: opacity .4s cubic-bezier(0.4,0,0.2,1), transform .4s cubic-bezier(0.34,1.4,0.64,1);
      pointer-events: none;
    }
    #fs-notify.show {
      opacity: 1;
      transform: translateY(0) scale(1);
      pointer-events: all;
    }
    #fs-notify.hide {
      opacity: 0;
      transform: translateY(10px) scale(0.96);
    }
    .fsn-icon {
      width: 32px; height: 32px; flex-shrink: 0;
      background: #ffffff;
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 14px; color: #000000;
      margin-top: 1px;
    }
    .fsn-body { flex: 1; }
    .fsn-title {
      font-family: 'JetBrains Mono', monospace;
      font-size: 10px; font-weight: 700;
      letter-spacing: 2px; text-transform: uppercase;
      color: #ffffff; margin-bottom: 5px;
    }
    .fsn-msg {
      font-family: 'Outfit', sans-serif;
      font-size: 12px; color: rgba(255,255,255,0.65);
      line-height: 1.55;
    }
    .fsn-msg strong { color: #ffffff; font-weight: 600; }
    .fsn-close {
      background: none; border: none; cursor: pointer;
      color: rgba(255,255,255,0.3); font-size: 14px;
      padding: 0; line-height: 1; flex-shrink: 0;
      transition: color .15s;
      align-self: flex-start;
    }
    .fsn-close:hover { color: #ffffff; }
    .fsn-bar {
      position: absolute;
      bottom: 0; left: 0;
      height: 2px;
      background: #ffffff;
      border-radius: 0 0 14px 14px;
      width: 100%;
      transform-origin: left;
      animation: fsn-shrink 6s linear forwards;
    }
    @keyframes fsn-shrink {
      from { transform: scaleX(1); }
      to   { transform: scaleX(0); }
    }

    @media (max-width: 768px) {
      #nav { padding: 0 20px; gap: 12px; }
      .nav-search { max-width: 180px; }
      .sort-btn span { display: none; }
      #hero, #featured-section, #games-section, .divider { padding-left: 20px; padding-right: 20px; }
      .hero-title { font-size: 48px; }
      #game-grid { grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); }
      #open-blob-btn span.blob-label { display: none; }
      #open-blob-btn { padding: 0 14px 0 12px; }
    }
  </style>
</head>
<body>
<!-- WATERMARKS -->
<div class="wm-corner" id="wm-tl">COSMIC EDITION</div>
<div class="wm-corner" id="wm-tr">COSMIC EDITION</div>
<div class="wm-corner" id="wm-bl">© COSMIC EDITION</div>
<div class="wm-corner" id="wm-br">© COSMIC EDITION</div>
<div id="wm-center">COSMIC EDITION</div>

<div id="bg-orbs"><span></span><span></span><span></span><span></span></div>
<div id="bg-noise"></div>
<div id="bg-scan"></div>
<div id="page">
  <nav id="nav">
    <a href="#" class="logo" onclick="return false;">
      <span class="logo-text">COSMIC EDITION</span>
    </a>
    <div class="nav-search">
      <i class="fa-solid fa-magnifying-glass"></i>
      <input id="search-input" type="text" placeholder="Search games…" autocomplete="off"/>
    </div>
    <div class="sort-group">
      <button class="sort-btn active" data-sort="default"><i class="fa-solid fa-fire"></i><span>Popular</span></button>
      <button class="sort-btn" data-sort="az"><i class="fa-solid fa-arrow-down-a-z"></i><span>A–Z</span></button>
      <button class="sort-btn" data-sort="za"><i class="fa-solid fa-arrow-up-a-z"></i><span>Z–A</span></button>
      <button class="sort-btn" data-sort="random"><i class="fa-solid fa-shuffle"></i><span>Random</span></button>
    </div>
    <div class="nav-badge" id="game-count-badge">— GAMES</div>
  </nav>

  <section id="hero">
    <div class="hero-eyebrow">Your personal arcade</div>
    <div class="hero-title">PLAY<br/><span class="outline">ANYTHING.</span><br/>RIGHT HERE.</div>
    <p class="hero-sub">Every game launches inside this page. Sort, search, and jump straight in.</p>
  </section>

  <div class="divider"></div>

  <section id="featured-section">
    <div class="section-hdr">
      <div class="section-hdr-left">
        <span class="section-tag">POPULAR GAMES</span>
        <span class="section-count" id="feat-count">— GAMES</span>
      </div>
      <span class="section-hint"><i class="fa-solid fa-arrows-left-right"></i> Drag to scroll</span>
    </div>
    <div id="feat-scroll"></div>
  </section>

  <section id="games-section">
    <div class="section-hdr">
      <div class="section-hdr-left">
        <span class="section-tag">ALL GAMES</span>
        <span class="section-count" id="all-count">— GAMES</span>
      </div>
    </div>
    <div id="loading-state"><div class="loader"></div><div class="loader-label">LOADING GAMES…</div></div>
    <div id="error-state">
      <h4><i class="fa-solid fa-triangle-exclamation"></i> Could not load games</h4>
      <p id="error-msg">Check your config.</p>
    </div>
    <div class="empty-state" id="empty-state">
      <i class="fa-solid fa-magnifying-glass"></i>
      <h3>NO RESULTS</h3>
      <p>Try a different search term.</p>
    </div>
    <div id="game-grid"></div>
  </section>
</div>

<!-- ── FULLSCREEN NOTIFICATION ── -->
<div id="fs-notify">
  <div class="fsn-icon">⛶</div>
  <div class="fsn-body">
    <div class="fsn-title">Fullscreen tip</div>
    <div class="fsn-msg">Games will only go <strong>full screen</strong> if you open the site as a blob — use the <strong>↗ button</strong> at the bottom left.</div>
  </div>
  <button class="fsn-close" onclick="dismissNotify()" aria-label="Dismiss">✕</button>
  <div class="fsn-bar"></div>
</div>
<button id="open-blob-btn" onclick="openSelfAsBlob()" title="Open this page in a blob tab">
  <span class="blob-icon">↗</span>
  <span class="blob-label">Open as Blob</span>
</button>

<button id="scroll-top" onclick="window.scrollTo({top:0,behavior:'smooth'})">↑</button>

<div id="overlay">
  <div class="ov-window">
    <div class="ov-bar">
      <div class="ov-dots">
        <span class="dot-r" onclick="closeOverlay()"></span>
        <span class="dot-y"></span>
        <span class="dot-g" onclick="toggleFullscreen()"></span>
      </div>
      <div id="ov-title">GAME</div>
      <div class="ov-controls">
        <button class="ov-btn" onclick="refreshGame()"><i class="fa-solid fa-rotate-right"></i> Refresh</button>
        <button class="ov-btn" onclick="openNewTab()"><i class="fa-solid fa-arrow-up-right-from-square"></i> New Tab</button>
        <button class="ov-btn" onclick="toggleFullscreen()"><i class="fa-solid fa-expand"></i> Fullscreen</button>
        <button class="ov-btn ov-btn-close" onclick="closeOverlay()"><i class="fa-solid fa-xmark"></i> Close</button>
      </div>
    </div>
    <iframe id="game-frame" title="Game" allowfullscreen></iframe>
  </div>
</div>

<script>
const GITHUB_USER  = 'Shazam123abc';
const GITHUB_REPO  = 'Cosmic-Edition-2.0';
const GAMES_FOLDER = 'Games';

const ICONS = ['fa-gamepad','fa-meteor','fa-robot','fa-rocket','fa-star','fa-globe','fa-bomb','fa-bolt','fa-shield-halved','fa-trophy','fa-crosshairs','fa-ghost','fa-dragon','fa-car','fa-plane','fa-space-shuttle','fa-puzzle-piece','fa-chess','fa-dice','fa-fish','fa-skull','fa-fire','fa-gem','fa-crown','fa-wand-magic-sparkles','fa-snowflake','fa-sun','fa-moon','fa-circle-dot'];

/* SCROLL TOP */
window.addEventListener('scroll',()=>{ document.getElementById('scroll-top').classList.toggle('show',scrollY>400); });

/* DRAG SCROLL */
const fs=document.getElementById('feat-scroll');
let drag=false,startX,sLeft;
fs.addEventListener('mousedown',e=>{drag=true;startX=e.pageX-fs.offsetLeft;sLeft=fs.scrollLeft;});
document.addEventListener('mouseup',()=>drag=false);
document.addEventListener('mousemove',e=>{if(!drag)return;fs.scrollLeft=sLeft-(e.pageX-fs.offsetLeft-startX);});

/* HELPERS */
function titleify(n){ return String(n).replace(/[-_]/g,' ').replace(/\b\w/g,c=>c.toUpperCase()); }
function cleanName(n){ return String(n).replace(/\.html$/i,''); }

/* STATE */
let ALL_GAMES=[], currentSort='default', searchQuery='', currentPath='';

/* SORT */
document.addEventListener('click', function(e){
  const btn = e.target.closest('.sort-btn');
  if(!btn) return;
  const type = btn.dataset.sort;
  if(!type) return;
  currentSort = type;
  document.querySelectorAll('.sort-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  renderGrid();
});

function getSorted(){
  let a=[...ALL_GAMES];
  if(currentSort==='az') a.sort((x,y)=>x.title.localeCompare(y.title));
  if(currentSort==='za') a.sort((x,y)=>y.title.localeCompare(x.title));
  if(currentSort==='random') a.sort(()=>Math.random()-.5);
  return a;
}

/* SEARCH */
let searchTimer=null;
document.getElementById('search-input').addEventListener('input',function(){
  clearTimeout(searchTimer);
  const val=this.value.toLowerCase().trim();
  searchTimer=setTimeout(()=>{ searchQuery=val; renderGrid(); }, 250);
});

/* FEATURED */
const POPULAR_NAMES = [
  'clcrazycattle3d','clcookieclicker','clflappybird','clFNAF',
  'clfireboyandwatergirl','clbloonsTD5','clgetawayshootout','clcrossynroad',
  'cl2048','clceleste','clcutherope','clbasketballstars',
  'clclusterrush','clducklife','clangrybirds','cldoom',
];

function buildFeatured(games){
  let featured = [];
  for(const pname of POPULAR_NAMES){
    const found = games.find(g => {
      const pathLower = (g.path||'').toLowerCase();
      const key = pname.toLowerCase();
      return pathLower.endsWith(key+'.html') || pathLower.includes('/'+key+'.html');
    });
    if(found) featured.push(found);
    if(featured.length >= 16) break;
  }
  if(featured.length < 8){
    for(const g of games){
      if(!featured.includes(g)) featured.push(g);
      if(featured.length >= 16) break;
    }
  }
  document.getElementById('feat-count').textContent=featured.length+' GAMES';
  const wrap=document.getElementById('feat-scroll');
  wrap.innerHTML='';
  featured.forEach((g,i)=>{
    const ic=ICONS[i%ICONS.length];
    const card=document.createElement('div');
    card.className='feat-card';
    card.innerHTML=`
      <div class="feat-bg"></div>
      <div class="feat-icon"><i class="fa-solid ${ic}"></i></div>
      <div class="feat-overlay"></div>
      <div class="feat-badge">POPULAR</div>
      <div class="feat-num">#${String(i+1).padStart(2,'0')}</div>
      <div class="feat-body">
        <div class="feat-title">${g.title}</div>
        <div class="feat-cta"><i class="fa-solid fa-play"></i> PLAY NOW</div>
      </div>`;
    card.addEventListener('click',()=>launchGame(g));
    wrap.appendChild(card);
  });
}

/* GRID */
const PAGE_SIZE=50;
let currentPage=0, filteredCache=[], isRendering=false;

function getFiltered(){
  const sorted=getSorted();
  return searchQuery ? sorted.filter(g=>g.title.toLowerCase().includes(searchQuery)) : sorted;
}

function renderPage(page){
  const grid=document.getElementById('game-grid');
  const batch=filteredCache.slice(page*PAGE_SIZE,(page+1)*PAGE_SIZE);
  const frag=document.createDocumentFragment();
  batch.forEach((g,localIdx)=>{
    const i=page*PAGE_SIZE+localIdx;
    const ic=ICONS[g.iconIdx%ICONS.length];
    const card=document.createElement('div');
    card.className='game-card';
    card.innerHTML=`
      <div class="gc-thumb"><span class="gc-thumb-icon"><i class="fa-solid ${ic}"></i></span></div>
      <div class="gc-body">
        <div class="gc-title">${g.title}</div>
        <div class="gc-foot">
          <span class="gc-play"><i class="fa-solid fa-play"></i> PLAY</span>
          <span class="gc-num">#${String(i+1).padStart(2,'0')}</span>
        </div>
      </div>`;
    card.addEventListener('click',()=>launchGame(g));
    frag.appendChild(card);
  });
  grid.appendChild(frag);
}

function renderGrid(){
  const grid=document.getElementById('game-grid');
  const empty=document.getElementById('empty-state');
  grid.innerHTML='';
  currentPage=0;
  filteredCache=getFiltered();
  document.getElementById('all-count').textContent=filteredCache.length+' GAMES';
  if(filteredCache.length===0){ empty.style.display='block'; return; }
  empty.style.display='none';
  renderPage(0);
  currentPage=1;
}

window.addEventListener('scroll',()=>{
  if(isRendering) return;
  const maxPage=Math.ceil(filteredCache.length/PAGE_SIZE);
  if(currentPage>=maxPage) return;
  if(window.innerHeight+window.scrollY>=document.body.offsetHeight-600){
    isRendering=true;
    requestAnimationFrame(()=>{ renderPage(currentPage); currentPage++; isRendering=false; });
  }
});

/* OVERLAY */
let currentBlobURL = null;

async function launchGame(g){
  currentPath = g.path;
  document.getElementById('ov-title').textContent = g.title.toUpperCase();
  document.getElementById('overlay').classList.add('active');
  const frame = document.getElementById('game-frame');
  frame.src = 'about:blank';
  try {
    const res = await fetch(g.path);
    if (!res.ok) throw new Error('HTTP ' + res.status);
    let html = await res.text();
    const match = html.match(/<html[\s\S]*<\/html>/i);
    if (match) html = match[0];
    if (currentBlobURL) { URL.revokeObjectURL(currentBlobURL); currentBlobURL = null; }
    const blob = new Blob([html], { type: 'text/html' });
    currentBlobURL = URL.createObjectURL(blob);
    frame.src = currentBlobURL;
  } catch(e) {
    console.error('Game load failed:', e.message);
    const blob = new Blob([`<body style="background:#111;color:#fff;font-family:sans-serif;display:flex;align-items:center;justify-content:center;height:100vh;margin:0"><div style="text-align:center"><div style="font-size:48px;margin-bottom:16px">⚠️</div><div>Failed to load game</div><div style="color:#666;font-size:13px;margin-top:8px">${e.message}</div></div></body>`], {type:'text/html'});
    frame.src = URL.createObjectURL(blob);
  }
}
function closeOverlay(){ document.getElementById('overlay').classList.remove('active'); setTimeout(()=>document.getElementById('game-frame').src='',350); }
function refreshGame(){ if(currentPath) launchGame({path:currentPath, title:document.getElementById('ov-title').textContent}); }
function toggleFullscreen(){ const f=document.getElementById('game-frame'); (f.requestFullscreen||f.webkitRequestFullscreen||f.mozRequestFullScreen).call(f); }
function openNewTab(){
  fetch(currentPath)
    .then(r => r.text())
    .then(html => {
      const match = html.match(/<html[\s\S]*<\/html>/i);
      const clean = match ? match[0] : html;
      const blob = new Blob([clean], {type:'text/html'});
      window.open(URL.createObjectURL(blob), '_blank');
    })
    .catch(() => window.open(currentPath, '_blank'));
}
document.getElementById('overlay').addEventListener('click',e=>{ if(e.target===document.getElementById('overlay'))closeOverlay(); });
document.addEventListener('keydown',e=>{ if(e.key==='Escape')closeOverlay(); });

/* PARSE ENTRY */
function parseEntry(item,i){
  if(typeof item==='string'){
    const clean=cleanName(item);
    return { title:titleify(clean), path:`https://cdn.jsdelivr.net/gh/${GITHUB_USER}/${GITHUB_REPO}@main/${GAMES_FOLDER}/${clean}.html`, iconIdx:i };
  }
  const name=item.name||item.title||item.folder||'';
  const filePath=item.path||`${GAMES_FOLDER}/${name}.html`;
  return { title:titleify(cleanName(name)), path:`https://cdn.jsdelivr.net/gh/${GITHUB_USER}/${GITHUB_REPO}@main/${filePath}`, iconIdx:i };
}

/* FETCH */
async function fetchGamesJson(){
  const urls = [
    `https://cdn.jsdelivr.net/gh/${GITHUB_USER}/${GITHUB_REPO}@main/games.json`,
    `https://cdn.jsdelivr.net/gh/${GITHUB_USER}/${GITHUB_REPO}@latest/games.json`,
    `https://cdn.jsdelivr.net/gh/${GITHUB_USER}/${GITHUB_REPO}/games.json`,
  ];
  let lastErr = '';
  for(const url of urls){
    try{
      const r = await fetch(url + '?t=' + Date.now());
      if(!r.ok) throw new Error('HTTP ' + r.status);
      const data = await r.json();
      const arr = Array.isArray(data) ? data : (data.games || []);
      if(arr.length > 0){ console.log('Loaded', arr.length, 'games from', url); return arr; }
    }catch(e){ lastErr = e.message; console.warn('CDN failed:', url, e.message); }
  }
  throw new Error('Could not load games.json from CDN. ' + lastErr);
}

/* INIT */
async function init(){
  const loadEl=document.getElementById('loading-state');
  const errEl=document.getElementById('error-state');
  const errMsg=document.getElementById('error-msg');
  try{
    loadEl.style.display='flex'; errEl.style.display='none';
    const raw=await fetchGamesJson();
    ALL_GAMES=raw.map((item,i)=>parseEntry(item,i));
    loadEl.style.display='none';
    document.getElementById('game-count-badge').textContent=ALL_GAMES.length+' GAMES';
    buildFeatured(ALL_GAMES);
    renderGrid();
  }catch(err){
    loadEl.style.display='none'; errEl.style.display='flex';
    errMsg.textContent=err.message;
    console.error('Error:',err);
  }
}
init();

/* ── OPEN SELF AS BLOB ──
   Grabs the current live DOM (document.documentElement.outerHTML),
   wraps it in a proper doctype, creates a blob URL, and opens it
   in a new tab — no network request, works instantly. */
function openSelfAsBlob() {
  try {
    const html = '<!DOCTYPE html>\n' + document.documentElement.outerHTML;
    const blob = new Blob([html], { type: 'text/html' });
    const url  = URL.createObjectURL(blob);
    const tab  = window.open(url, '_blank');
    // Revoke the URL after the tab has had time to load
    if (tab) {
      tab.addEventListener('load', () => URL.revokeObjectURL(url), { once: true });
      setTimeout(() => URL.revokeObjectURL(url), 10000);
    }
  } catch(e) {
    alert('Could not open as blob: ' + e.message);
  }
}

/* ── FULLSCREEN NOTIFICATION ── */
(function(){
  const notify = document.getElementById('fs-notify');
  let timer;
  // Show after 1.2s so the page has settled
  setTimeout(() => {
    notify.classList.add('show');
    timer = setTimeout(dismissNotify, 6000);
  }, 1200);
  window._fsNotifyTimer = timer;
})();
function dismissNotify(){
  const notify = document.getElementById('fs-notify');
  clearTimeout(window._fsNotifyTimer);
  notify.classList.remove('show');
  notify.classList.add('hide');
}

window.onbeforeunload = null;
window.addEventListener('beforeunload', e => { delete e['returnValue']; }, true);

/* ANTI-INSPECT */
document.addEventListener('contextmenu', e => e.preventDefault());
document.addEventListener('keydown', e => {
  if(e.key === 'F12') { e.preventDefault(); return false; }
  if(e.ctrlKey && e.shiftKey && ['I','i','J','j','C','c'].includes(e.key)) { e.preventDefault(); return false; }
  if(e.ctrlKey && ['U','u'].includes(e.key)) { e.preventDefault(); return false; }
  if(e.ctrlKey && ['S','s'].includes(e.key)) { e.preventDefault(); return false; }
  if(e.ctrlKey && ['A','a'].includes(e.key)) { e.preventDefault(); return false; }
});
document.addEventListener('selectstart', e => e.preventDefault());
(function devtoolsDetect(){
  const threshold = 160;
  setInterval(()=>{
    if(window.outerWidth - window.innerWidth > threshold || window.outerHeight - window.innerHeight > threshold){
      document.body.innerHTML = '<div style="background:#000;color:#fff;height:100vh;display:flex;align-items:center;justify-content:center;font-family:sans-serif;font-size:18px;letter-spacing:2px">ACCESS DENIED</div>';
    }
  }, 1000);
})();
</script>
</body>
</html>
